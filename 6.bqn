in‚Üê‚Ä¢file.Chars "input/6.txt"

P‚Üê(¬¨-Àú‚ä¢√ó¬∑+`¬ª‚ä∏>)‚ä∏‚äî
PadMat‚Üê‚ä£(‚ä£‚àæÀò‚ä¢‚àæÀò‚ä£)‚ä¢(‚ä£‚àæ‚ä¢‚àæ‚ä£)Àú‚ä£‚•äÀú‚â†‚àò‚ä¢
AnyWhere‚Üê/‚óã‚•ä‚üú(‚Üï‚â¢)
OutOfBounds‚Üê‚à®¬¥(0>‚ä¢)‚àæ‚â¢‚ä∏‚â§

Parse‚Üê>' '‚ä∏<‚ä∏P

Traverse‚Üê{
	¬¨‚äë'^'‚àä‚•äùï©? 0‚Äø2‚•ä0;
	grid‚Üêùï©
	pos‚Üê‚äëAnyWhere'^'=grid
	dir‚Üê¬Ø1‚Äø0
	continue‚Üê1
	visited‚Üê0‚Äø2‚•ä0
	visited_dir‚Üê0‚Äø4‚•ä0
	{ùïä:
	  grid OutOfBounds pos+dir?continue‚Ü©0;
		‚äëvisited_dir‚àäÀúdir‚àæÀúpos+dir?continue‚Ü©0;
		'#'=grid‚äëÀúpos+dir?dir‚Ü©1‚Äø¬Ø1√ó‚åΩdir;
		pos‚Ü©pos+dir ‚ãÑ visited‚Ü©visited‚àæpos ‚ãÑ visited_dir‚Ü©visited_dir‚àæpos‚àædir
	}‚Ä¢_while_{ùïä: continue} ‚ü®‚ü©
	‚ç∑visited
}
Completes‚Üê(0=¬¨‚óã(‚â†Traverse)‚üú('.'‚ä∏PadMat))

Part1‚Üê{1+‚â†Traverse Parseùï©}
Part2‚Üê{
	grid‚ÜêParseùï©
	check‚Üê‚ç∑‚•ä‚ü®0‚Äø0,0‚Äø1,1‚Äø0,0‚Äø¬Ø1,¬Ø1‚Äø0‚ü©+‚åú <ÀòTraverse grid
	1-Àú+¬¥{¬¨Completes '#'‚åæ(ùï©‚ä∏‚äë)grid}‚éä0¬® check
}

‚Ä¢Show Part1 in
‚Ä¢Show Part2 in

